From d451d4dd75ba7e8df6e1615c7b34c570d562b508 Mon Sep 17 00:00:00 2001
From: Michael Catanzaro <mcatanzaro@igalia.com>
Date: Fri, 8 Dec 2017 12:15:02 -0600
Subject: [PATCH] Remove new Perl dependency

---
 Source/WebInspectorUI/Scripts/copy-user-interface-resources.pl | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/Source/WebInspectorUI/Scripts/copy-user-interface-resources.pl b/Source/WebInspectorUI/Scripts/copy-user-interface-resources.pl
index ee23a39006f..3398597efe4 100755
--- a/Source/WebInspectorUI/Scripts/copy-user-interface-resources.pl
+++ b/Source/WebInspectorUI/Scripts/copy-user-interface-resources.pl
@@ -46,6 +46,15 @@ sub ditto($$)
         File::Copy::Recursive::dircopy($source, $destination) or die "Unable to copy directory $source to $destination: $!";
     } elsif ($^O eq 'darwin') {
         system('ditto', $source, $destination);
+    } elsif ($^O ne 'MSWin32') {
+        # Ditto copies the *contents* of the source directory, not the directory itself.
+        opendir(my $dh, $source) or die "Can't open $source: $!";
+        while (readdir $dh) {
+            if ($_ ne '..' and $_ ne '.') {
+                system('cp', '-a', "${source}/$_", $destination);
+            }
+        }
+        closedir $dh;
     } else {
         die "Please install the PEP module File::Copy::Recursive";
     }
-- 
2.14.3

